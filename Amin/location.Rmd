---
title: "location"
author: "Amin Shirazi"
date: "4/17/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(dplyr)
library(ggplot2)
library(tidyr)
library(ggmap)
```


```{r}
train<- read.csv('../data/train.csv') %>% select(- X)
test <- read.csv('../data/test.csv') %>% select(- X)
```


## add lat and long to train data 

```{r}

# geo <- geocode(location = train$ADDRESS)
# df.geo <- bind_cols(train, geo)
# 
# ge.na<-df.geo %>% filter(lat %>% is.na()) 
# geo.na <- geocode(location = ge.na$NEIGHBORHOOD)
# 
# indx<-which(df.geo$lat %>% is.na())
# df.geo$lat[indx] <- geo.na$lat
# df.geo$lon[indx] <- geo.na$lon
# 
# write.csv(df.geo, "../data/train.csv")

```


```{r}
get_local_spot <-  get_map("Queens", maptype = "roadmap", zoom = 10) 
ggmap(get_local_spot) + 
   geom_point(data = train, aes(x = lon, y = lat), color = "navy", size = 1) +
   geom_point(data = filter(train, SALE.PRICE > 14), aes(x = lon, y = lat),  color = "red", size = 1)
```




## Add lat and long to test data
```{r}

# geo <- geocode(location = test$ADDRESS)
# 
# 
# df.geo <- bind_cols(test, geo)
# df.geo %>% summary()
# ge.na<-df.geo %>% filter(lat %>% is.na()) 
# geo.na <- geocode(location = ge.na$NEIGHBORHOOD)
# 
# indx<-which(df.geo$lat %>% is.na())
# df.geo$lat[indx] <- geo.na$lat
# df.geo$lon[indx] <- geo.na$lon

#write.csv(df.geo, "../data/test.csv")

```


```{r}
get_local_spot <-  get_map("Queens", maptype = "roadmap", zoom = 10) 
ggmap(get_local_spot) + 
   geom_point(data = test, aes(x = lon, y = lat), color = "navy", size = 1) 
```





